<html>
  <head>
    <title>Hydro</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script src="../../../build/build.js"></script>
    <script>
      function assert(expr, msg) {
        if (expr) return;
        throw new Error(msg || 'Assertion Failed');
      }

      var Hydro = require('hydro');
      var runner = Hydro();

      runner.set({
        suite: 'Hydro',
        proxies: {
          t: 'addTest'
        },
        globals: {
          Hydro: Hydro
        },
        tests: [
          '../../hydro.addsuite.js',
          '../../hydro.addtest.js',
          '../../hydro.attach.js',
          '../../hydro.createsuite.js',
          '../../hydro.createtest.js',
          '../../hydro.formatter.js',
          '../../hydro.get.js',
          '../../hydro.globals.js',
          '../../hydro.on.js',
          '../../hydro.plugins.js',
          '../../hydro.proxies.js',
          '../../hydro.push.js',
          '../../hydro.run.js',
          '../../hydro.set.js',
          '../../hydro.suites.js',
          '../../hydro.tests.js',
          '../../hydro.traverse.js',
          '../../root-suite.js',
          '../../test.parents.js',
          '../../util.js'
        ]
      });

      var aliases = {
        passed: 'OK',
        skipped: 'SKIPPED',
        pending: 'PENDING',
        failed: 'NOT OK'
      };

      runner.on('post:test', function(test) {
        var parents = test.parents();
        var title = '';
        for (var i = 0, len = parents.length; i < len; i++) title = parents[i].title + ' - ';
        title += test.title;
        console.log('%s ... ' + aliases[test.status], title);
        if (test.error) console.error(test.error.message);
      });

      window.onload = function() {
        runner.run();
      };
    </script>
  </head>

  <body>
  </body>
</html>
